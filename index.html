<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ì˜ë‹¨ì–´ ì‹œí—˜</title>
<style>
    body { 
        font-family: Arial, sans-serif; 
        padding: 20px; 
        max-width: 600px; 
        margin: auto; 
        text-align: center;
    }
    h1, h2 { color: #333; }
    input, button { padding: 10px; font-size: 16px; margin: 5px; }
    button { cursor: pointer; border: none; background-color: #007bff; color: white; border-radius: 4px; }
    button:hover { background-color: #0056b3; }
    table { border-collapse: collapse; margin: 20px auto; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: center; font-size: 16px; }
    #quizStatus { font-size: 20px; margin-bottom: 10px; }
    #quizWord { font-size: 28px; margin: 15px 0; font-weight: bold; }
    #feedback { font-size: 20px; transition: transform 0.3s ease; }
    .correct { color: green; transform: scale(1.1); }
    .wrong { color: red; transform: scale(1.1); }
    #score { font-size: 22px; font-weight: bold; margin-bottom: 10px; }
    #wrongList td { padding: 8px; }
    #wrongList tr:nth-child(even) { background-color: #f9f9f9; }
    .deleteBtn { background-color: red; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; }
    .deleteBtn:hover { background-color: darkred; }
</style>
</head>
<body>

<h1>ì˜ë‹¨ì–´ ì…ë ¥</h1>

<input type="text" id="word" placeholder="ì˜ë‹¨ì–´" />
<input type="text" id="meaning" placeholder="ëœ»" />
<button onclick="addWord()">ì¶”ê°€</button>
<button onclick="startQuiz()" id="startQuizBtn">ì‹œí—˜ ì‹œì‘</button>

<table id="wordList">
    <tr><th>ì˜ë‹¨ì–´</th><th>ëœ»</th><th>ì‚­ì œ</th></tr>
</table>

<div id="quizSection" style="display:none;">
    <h2>ì‹œí—˜</h2>
    <div id="quizStatus"></div>
    <div id="quizWord"></div>
    <input type="text" id="answerInput" placeholder="ëœ»ì„ ì…ë ¥í•˜ì„¸ìš”" />
    <button onclick="submitAnswer()">ì œì¶œ</button>
    <div id="feedback" style="margin-top:10px; font-weight:bold;"></div>
</div>

<div id="result" style="display:none;">
    <h2>ì‹œí—˜ ê²°ê³¼</h2>
    <div id="score"></div>
    <table id="wrongList">
        <tr><th>ì˜ë‹¨ì–´</th><th>ì •ë‹µ</th><th>ì…ë ¥í•œ ë‹µ</th></tr>
    </table>
    <button onclick="restart()">ë‹¤ì‹œ ì‹œí—˜ ë³´ê¸°</button>
</div>

<script>
let words = [];
let quizWords = [];
let currentIndex = 0;
let correctCount = 0;
let wrongAnswers = [];

// ë‹¨ì–´ ì¶”ê°€
function addWord() {
    const wordInput = document.getElementById('word');
    const meaningInput = document.getElementById('meaning');
    const word = wordInput.value.trim();
    const meaning = meaningInput.value.trim();

    if(word && meaning) {
        words.push({word, meaning});
        renderTable();
        wordInput.value = '';
        meaningInput.value = '';
    } else {
        alert("ì˜ë‹¨ì–´ì™€ ëœ»ì„ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš”!");
    }
}

// ë‹¨ì–´ ì‚­ì œ
function deleteWord(index) {
    if (confirm("ì´ ë‹¨ì–´ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        words.splice(index, 1);
        renderTable();
    }
}

// ë‹¨ì–´ ëª©ë¡ í‘œì‹œ
function renderTable() {
    const table = document.getElementById('wordList');
    table.innerHTML = '<tr><th>ì˜ë‹¨ì–´</th><th>ëœ»</th><th>ì‚­ì œ</th></tr>';
    words.forEach((item, i) => {
        table.innerHTML += `<tr>
            <td>${item.word}</td>
            <td>${item.meaning}</td>
            <td><button class="deleteBtn" onclick="deleteWord(${i})">X</button></td>
        </tr>`;
    });
}

// ì‹œí—˜ ì‹œì‘
function startQuiz() {
    if (words.length === 0) {
        alert("ë‹¨ì–´ë¥¼ ë¨¼ì € ì…ë ¥í•˜ì„¸ìš”!");
        return;
    }
    quizWords = [...words].sort(() => Math.random() - 0.5);
    currentIndex = 0;
    correctCount = 0;
    wrongAnswers = [];

    document.querySelector('h1').style.display = 'none';
    document.getElementById('word').style.display = 'none';
    document.getElementById('meaning').style.display = 'none';
    document.getElementById('startQuizBtn').style.display = 'none';
    document.getElementById('wordList').style.display = 'none';
    document.querySelector('button[onclick="addWord()"]').style.display = 'none';

    document.getElementById('quizSection').style.display = 'block';
    document.getElementById('result').style.display = 'none';
    renderQuiz();
}

// ì‹œí—˜ ë¬¸ì œ ì¶œë ¥
function renderQuiz() {
    document.getElementById('quizStatus').textContent = `ë¬¸ì œ ${currentIndex + 1} / ${quizWords.length}`;
    document.getElementById('quizWord').textContent = quizWords[currentIndex].word;
    document.getElementById('answerInput').value = '';
    document.getElementById('feedback').textContent = '';
    document.getElementById('feedback').className = '';
    document.getElementById('answerInput').focus();
}

// ë‹µ ì œì¶œ
function submitAnswer() {
    const answerInput = document.getElementById('answerInput');
    const userAnswer = answerInput.value.trim();
    const correctAnswer = quizWords[currentIndex].meaning;
    const feedback = document.getElementById('feedback');

    if(userAnswer === '') {
        alert("ëœ»ì„ ì…ë ¥í•˜ì„¸ìš”!");
        return;
    }

    if(userAnswer === correctAnswer) {
        correctCount++;
        feedback.textContent = 'ì •ë‹µ! ğŸ‰';
        feedback.className = 'correct';
    } else {
        wrongAnswers.push({
            word: quizWords[currentIndex].word,
            correct: correctAnswer,
            user: userAnswer
        });
        feedback.textContent = `ì˜¤ë‹µ! ì •ë‹µì€: ${correctAnswer}`;
        feedback.className = 'wrong';
    }

    currentIndex++;
    if(currentIndex < quizWords.length) {
        setTimeout(renderQuiz, 1000);
    } else {
        setTimeout(showResult, 1000);
    }
}

// ê²°ê³¼ í‘œì‹œ
function showResult() {
    document.getElementById('quizSection').style.display = 'none';
    document.getElementById('result').style.display = 'block';

    const scorePercent = Math.round((correctCount / quizWords.length) * 100);
    document.getElementById('score').textContent = `ì •ë‹µë¥ : ${scorePercent}% (${correctCount} / ${quizWords.length})`;

    const wrongListTable = document.getElementById('wrongList');
    wrongListTable.innerHTML = '<tr><th>ì˜ë‹¨ì–´</th><th>ì •ë‹µ</th><th>ì…ë ¥í•œ ë‹µ</th></tr>';
    wrongAnswers.forEach(item => {
        wrongListTable.innerHTML += `<tr><td>${item.word}</td><td>${item.correct}</td><td>${item.user}</td></tr>`;
    });
}

// ì‹œí—˜ ë‹¤ì‹œ ì‹œì‘
function restart() {
    document.getElementById('result').style.display = 'none';
    document.querySelector('h1').style.display = 'block';
    document.getElementById('word').style.display = 'inline-block';
    document.getElementById('meaning').style.display = 'inline-block';
    document.getElementById('startQuizBtn').style.display = 'inline-block';
    document.getElementById('wordList').style.display = 'table';
    document.querySelector('button[onclick="addWord()"]').style.display = 'inline-block';

    quizWords = [];
    currentIndex = 0;
    correctCount = 0;
    wrongAnswers = [];
    renderTable();
}
</script>

</body>
</html>
